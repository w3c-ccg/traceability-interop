openapi: '3.0.0'
info:
  version: 1.0.0
  title: Traceability Open API Interoperability Profile
  description: Identifier and Credentials APIs for DID.
  license:
    name: Apache.20

servers:
  - url: https://api.did.actor

tags:
  - name: Discovery
  - name: Identifiers
  - name: Credentials
  - name: Presentations

paths:
  /did.json:
    $ref: './resources/api-configuration.yml'

  /identifiers/{did}:
    $ref: './resources/did.yml'

  /api/credentials/issue:
    $ref: './resources/credential-issuer.yml'
  /api/credentials/status:
    $ref: './resources/credential-status.yml'
  /api/credentials/verify:
    $ref: './resources/credential-verifier.yml'
  /credentials/{credential-id}:
    $ref: './resources/credential.yml'

  /api/presentations:
    $ref: './resources/presentations.yml'
  /api/presentations/prove:
    $ref: './resources/presentation-prover.yml'
  /api/presentations/verify:
    $ref: './resources/presentation-verifier.yml'
  /api/presentations/available:
    $ref: './resources/presentation-available.yml'
  /api/presentations/submissions:
    $ref: './resources/presentation-submissions.yml'

components:
  securitySchemes:
    OAuth2:
      type: oauth2
      flows:
        clientCredentials:
          authorizationUrl: https://example.com/authorize
          tokenUrl: https://example.com/oauth/token
          redirectUri: 'http://localhost:5000/oauth2-redirect.html'
          scopes:
            'resolve:dids': Grants permission to resolve DIDs
            'issue:credentials': Grants permission issue Verifiable Credentials
            'verify:credentials': Grants permission verify Verifiable Credentials
            'read:credentials': Grants permission to get Verifiable Credentials
            'update:credentials': Grants permission to update the status of Verifiable Credentials
            'prove:presentations': Grants permission to proof Verifiable Presentations
            'verify:presentations': Grants permission verify Verifiable Presentations
            'submit:presentations': Grants permission present Verifiable Presentations
  parameters:
    $ref: './parameters/_index.yml'
  schemas:
    $ref: './schemas/_index.yml'
  responses:
    $ref: './responses/_index.yml'
