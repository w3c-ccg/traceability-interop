<!DOCTYPE html>
<section class="informative">
  <h3>Use Cases and Requirements</h3>

  <p>
    The following use cases outline a number of key scenarios that readers might
    find useful in a variety of sectors, especially those that deal with cross
    border supply chain data interchange.
  </p>

  <section>
    <h4>Identifier Discovery</h4>

<p>
As supply chains invest in web compatible standards such as
<a href="https://www.gs1.org/standards/gs1-digital-link"
>GS1 Digital Link</a
>
and <a href="https://www.gs1.org/standards/epcis">GS1 EPCIS</a>, the
need to discover identifiers associated with legal entities, products,
and associated web origins becomes critical to the adoption of
verifiable credentials in a supply chain context.
</p>

<p>
This API specification describes how existing web standards can be
applied to the identifier discovery use case for supply chain actors and
products.
</p>

<p class="advisement">
The <a href="https://github.com/w3c-ccg/did-method-web">did:web</a>
method MUST be supported.
</p>

<p>
This document defines the discoverability feature
necessary to complete integration tests in postman with authentication.
</p>

<p>
The current APIs exploit the well known DID configuration,
which has some limitations, most notably regarding multi-tenant platforms.
</p>

<section>
<h5>Integration Considerations</h5>
<p>
An organization will have an application authorized to act on their behalf.
</p>

<p>
The application will be identified with a <code>CLIENT_ID</code> which MAY be publically shared.
</p>
<p class="advisement">
Implementations are encouraged to include specific DIDs per `CLIENT_ID` in an `allow-list`.
</p>

<p>
The application will be authenticated with a <code>CLIENT_SECRET</code> which MUST NOT be disclosed.
</p>

<p>
The organization MAY have more than one DID.
</p>

<p>
Each organization DID will have DID URLs for <code>assertionMethod</code> and <code>authentication</code> relationships.
</p>

<p>
  As a representative of an organization, I can discover another organization's supported API features from their <code>did:web</code>.
</p>

</section>


  <section>
  <h5>Discovering Organizational Identifiers</h5>

<p>
1. Resolve <code>did:web:platform.example:organization:123</code>.

This is trivial, simply do:
</p>

<pre class="example">
HTTP GET https://platform.example/organization/123/did.json => didDocument.json
</pre>

 <p>
2. Review the <code>serviceEndpoint</code>, <code>assertionMethod</code>, and <code>authentication</code> sections of the DID document.
 </p>
<section>
  <h5>service</h5>


<p>
The service block provides a means of communicating or interacting with the DID subject or associated entities via one or more service endpoints.
</p>

  <p>
    See <a href="https://www.w3.org/TR/did-core/#dfn-service">service</a>.
  </p>

<p>
This entry MUST be present.
</p>
<p>
This entry MUST have an element of type <code>TraceabilityAPI</code> with a <code>serviceEndpoint</code> URL for a VC-API that supports presentation exchange.
</p>

  <p>For example:</p>

<pre class="example">
"service": [
  {
    "id": "did:web:platform.example:organization:123#traceability-api",
    "type": ["TraceabilityAPI"],
    "serviceEndpoint": "https://platform.example/organization/123"
  }
]
</pre>

<p>This definition implies the following endpoints:</p>

<pre class="example">
https://platform.example/organization/123/credentials/issue
https://platform.example/organization/123/credentials/verify
https://platform.example/organization/123/presentations
</pre>

<p>
These endpoints always require the application to be authenticated:
</p>

<pre class="example">
https://platform.example/organization/123/credentials/issue
</pre>

<p class="advisement">
Implementations are encouraged to require authentication for all endpoints.
</p>

</section>

<section>
  <h5>assertionMethod</h5>
<p>
  The <code>assertionMethod</code> references public key material used by the organization for issuing Verifiable Credentials.
</p>

<p>
See <a href="https://www.w3.org/TR/did-core/#assertion">assertionMethod</a>.
</p>

<p>
  This entry MUST be present.
</p>

<p>
  This entry MUST have at least one entry referencing an available <code>verificationMethod</code>.
</p>

</section>

<section>
  <h5>verificationMethod</h5>

  <p>
    The <code>verificationMethod</code> contains cryptographic material for public keys.
  </p>

  <p>
    See <a href="https://www.w3.org/TR/did-core/#verification-methods">verificationMethod</a>.
  </p>

<p>
  The <code>didDocument</code> MUST contain at least one <code>verificationMethod</code> element.
</p>

<p>
  The <code>didDocument</code> MUST NOT contain <code>verificationMethods</code> where the controller is different from the DID Subject.
</p>

<p>
  All <code>Ed25519VerificationKey2018</code> types support <code>Ed25519Siganture2018</code>.
</p>

<p>
  All <code>JsonWebKey</code> types support <code>application/vc+ld+jwt</code>.
</p>

<pre class="example">
  {
    "@context": [
      "https://www.w3.org/ns/did/v1",
      "https://w3id.org/traceability/v1"
    ],
    "id": "did:web:platform.example:organization:123",
    "assertionMethod": [
      "did:web:platform.example:organization:123#key1"
    ],
    "verificationMethod": [
        {
            "id": "did:web:platform.example:organization:123#key1",
            "type": "JsonWebKey2020",
            "controller": "did:web:platform.example:organization:123",
            "publicKeyJwk": {
                "kty": "OKP",
                "crv": "Ed25519",
                "x": "rfsiofZ3RcuMWZSoYbvNEZ_8oxeep8uapJDyT0ku8EM"
            }
        }
    ],
    "service": [
      {
        "id": "did:web:platform.example:organization:123#traceability-api",
        "type": ["TraceabilityAPI"],
        "serviceEndpoint": "https://platform.example/organization/123"
      }
    ]
  }
</pre>

</section>
  </section>

</section>
